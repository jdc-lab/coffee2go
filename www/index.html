<!DOCTYPE html>
<html lang="de">
    <head>
        <title>Coffee2Go</title>
        <link rel="shortcut icon" href="img/favicon.png">
        <link rel="stylesheet" href="css/default.css">
    </head>
    <body onload="run()">
        <h2>Drink Coffee2Go and chat with XMPP.</h2>
        <div id="chat">
            <div id="out-message"></div>
            <div id="input">
                <label for="inp-message">Chat</label>
                <input type="text" id="inp-message" name="Message" minlength="4" maxlength="8" size="10">

                <button type="button" id="btn-send">Send</button>
            </div>
        </div>

        <!-- Connect UI actions to Go functions -->
        <script>
            const btnSend = document.querySelector('#btn-send');
            const txtInput = document.querySelector("#inp-message");
            const textOutput = document.querySelector('#out-message');

            const render = async () => {
                textOutput.innerText = `You wrote: ${await goGetText()}`;
            };

            btnSend.addEventListener('click', async () => {
                let text = txtInput.value;

                await goSend(text); // Call Go function

                render();
            });

            render();
        </script>
    </body>
</html>
